<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ä¸€ã€å‰è¨€ åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæµ‹è¯•é˜¶æ®µéœ€è¦å¼€å‘å»æ‰‹åŠ¨æ‰“åŒ…ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½ä¸‹ï¼Œè€Œä¸”å¦‚æœå¼€å‘æ­£åœ¨å…¶ä»–åˆ†æ”¯æˆ–è€…æ­£åœ¨å¼€å‘ï¼Œæ‰“åŒ…ä¹Ÿéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„è¯ç”Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚
äºŒã€åŸºç¡€æ¦‚å¿µä»‹ç» Jenkins Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œç”¨äºç›‘æ§æŒç»­é‡å¤çš„å·¥ä½œï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶é¡¹ç›®å¯ä»¥è¿›è¡ŒæŒç»­é›†æˆ
Gradle Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå¼€æºå·¥å…·ã€‚å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®ï¼Œç›®å‰ä¹Ÿå¢åŠ äº†åŸºäºKotlinè¯­è¨€çš„kotlin-based DSLï¼ŒæŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®
Fastlane Fastlaneæ˜¯ç”¨Rubyè¯­è¨€ç¼–å†™çš„ä¸€å¥—è‡ªåŠ¨åŒ–å·¥å…·é›†å’Œæ¡†æ¶ï¼Œæ¯ä¸€ä¸ªå·¥å…·å®é™…éƒ½å¯¹åº”ä¸€ä¸ªRubyè„šæœ¬ï¼Œç”¨æ¥æ‰§è¡ŒæŸä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼Œè€Œfastlaneæ ¸å¿ƒæ¡†æ¶åˆ™å…è®¸ä½¿ç”¨è€…é€šè¿‡ç±»ä¼¼é…ç½®æ–‡ä»¶çš„å½¢å¼ï¼Œå°†ä¸åŒçš„å·¥å…·æœ‰æœºè€Œçµæ´»çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œä»è€Œå½¢æˆä¸€ä¸ªä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚
ä¸‰ã€Appè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­å»ºæµç¨‹ ç¬¬ä¸€æ­¥ï¼Œæ­å»ºJenkinsï¼Œè¿™ä¸ªç½‘ä¸Šéƒ½æœ‰å¤§é‡æ•™ç¨‹ï¼Œæˆ‘å°±ä¸è¯¦ç»†èµ˜è¿°äº†ã€‚
ç¬¬äºŒæ­¥ï¼Œæ­å»ºAndroidã€IOSå¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œç½‘ä¸Šä¹Ÿæœ‰å¤§é‡æ•™ç¨‹ï¼Œä¸åœ¨èµ˜è¿°
ç¬¬ä¸‰æ­¥ï¼Œä¹¦å†™Jenkinsè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ï¼ŒJenkinsæ–°å»ºå¯¹åº”çš„ä»»åŠ¡
æ€»ä½“æ¥è¯´ï¼Œæ­å»ºAppè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­¥éª¤ä¸»è¦å°±è¿™3æ­¥ã€‚ä¸»è¦ä»‹ç»çš„å°±æ˜¯ç¬¬3æ­¥ï¼Œè¿™é‡Œç”¨æˆ‘ä»¬å·¥ç¨‹é‡Œçš„è„šæœ¬æ¥è¯¦ç»†è¯´æ˜ï¼Œæ¯è¡Œå‘½ä»¤çš„ä½œç”¨ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 pipeline { agent any parameters { string(name: &amp;#39;EMAIL&amp;#39;, defaultValue: &amp;#39;liang@xyz.'>
<title>Appè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„æ­å»ºä¸ç»´æŠ¤</title>

<link rel='canonical' href='https://rmondjone.github.io/posts/devops/app_ci/'>

<link rel="stylesheet" href="/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css"><meta property='og:title' content='Appè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„æ­å»ºä¸ç»´æŠ¤'>
<meta property='og:description' content='ä¸€ã€å‰è¨€ åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæµ‹è¯•é˜¶æ®µéœ€è¦å¼€å‘å»æ‰‹åŠ¨æ‰“åŒ…ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½ä¸‹ï¼Œè€Œä¸”å¦‚æœå¼€å‘æ­£åœ¨å…¶ä»–åˆ†æ”¯æˆ–è€…æ­£åœ¨å¼€å‘ï¼Œæ‰“åŒ…ä¹Ÿéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„è¯ç”Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚
äºŒã€åŸºç¡€æ¦‚å¿µä»‹ç» Jenkins Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œç”¨äºç›‘æ§æŒç»­é‡å¤çš„å·¥ä½œï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶é¡¹ç›®å¯ä»¥è¿›è¡ŒæŒç»­é›†æˆ
Gradle Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå¼€æºå·¥å…·ã€‚å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®ï¼Œç›®å‰ä¹Ÿå¢åŠ äº†åŸºäºKotlinè¯­è¨€çš„kotlin-based DSLï¼ŒæŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®
Fastlane Fastlaneæ˜¯ç”¨Rubyè¯­è¨€ç¼–å†™çš„ä¸€å¥—è‡ªåŠ¨åŒ–å·¥å…·é›†å’Œæ¡†æ¶ï¼Œæ¯ä¸€ä¸ªå·¥å…·å®é™…éƒ½å¯¹åº”ä¸€ä¸ªRubyè„šæœ¬ï¼Œç”¨æ¥æ‰§è¡ŒæŸä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼Œè€Œfastlaneæ ¸å¿ƒæ¡†æ¶åˆ™å…è®¸ä½¿ç”¨è€…é€šè¿‡ç±»ä¼¼é…ç½®æ–‡ä»¶çš„å½¢å¼ï¼Œå°†ä¸åŒçš„å·¥å…·æœ‰æœºè€Œçµæ´»çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œä»è€Œå½¢æˆä¸€ä¸ªä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚
ä¸‰ã€Appè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­å»ºæµç¨‹ ç¬¬ä¸€æ­¥ï¼Œæ­å»ºJenkinsï¼Œè¿™ä¸ªç½‘ä¸Šéƒ½æœ‰å¤§é‡æ•™ç¨‹ï¼Œæˆ‘å°±ä¸è¯¦ç»†èµ˜è¿°äº†ã€‚
ç¬¬äºŒæ­¥ï¼Œæ­å»ºAndroidã€IOSå¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œç½‘ä¸Šä¹Ÿæœ‰å¤§é‡æ•™ç¨‹ï¼Œä¸åœ¨èµ˜è¿°
ç¬¬ä¸‰æ­¥ï¼Œä¹¦å†™Jenkinsè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ï¼ŒJenkinsæ–°å»ºå¯¹åº”çš„ä»»åŠ¡
æ€»ä½“æ¥è¯´ï¼Œæ­å»ºAppè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­¥éª¤ä¸»è¦å°±è¿™3æ­¥ã€‚ä¸»è¦ä»‹ç»çš„å°±æ˜¯ç¬¬3æ­¥ï¼Œè¿™é‡Œç”¨æˆ‘ä»¬å·¥ç¨‹é‡Œçš„è„šæœ¬æ¥è¯¦ç»†è¯´æ˜ï¼Œæ¯è¡Œå‘½ä»¤çš„ä½œç”¨ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 pipeline { agent any parameters { string(name: &amp;#39;EMAIL&amp;#39;, defaultValue: &amp;#39;liang@xyz.'>
<meta property='og:url' content='https://rmondjone.github.io/posts/devops/app_ci/'>
<meta property='og:site_name' content='éƒ­ç¿°æ—çš„åšå®¢'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='Devops' /><meta property='article:published_time' content='2023-04-07T10:25:32&#43;08:00'/><meta property='article:modified_time' content='2023-04-07T10:25:32&#43;08:00'/>
<meta name="twitter:title" content="Appè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„æ­å»ºä¸ç»´æŠ¤">
<meta name="twitter:description" content="ä¸€ã€å‰è¨€ åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæµ‹è¯•é˜¶æ®µéœ€è¦å¼€å‘å»æ‰‹åŠ¨æ‰“åŒ…ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½ä¸‹ï¼Œè€Œä¸”å¦‚æœå¼€å‘æ­£åœ¨å…¶ä»–åˆ†æ”¯æˆ–è€…æ­£åœ¨å¼€å‘ï¼Œæ‰“åŒ…ä¹Ÿéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„è¯ç”Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚
äºŒã€åŸºç¡€æ¦‚å¿µä»‹ç» Jenkins Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œç”¨äºç›‘æ§æŒç»­é‡å¤çš„å·¥ä½œï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶é¡¹ç›®å¯ä»¥è¿›è¡ŒæŒç»­é›†æˆ
Gradle Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå¼€æºå·¥å…·ã€‚å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®ï¼Œç›®å‰ä¹Ÿå¢åŠ äº†åŸºäºKotlinè¯­è¨€çš„kotlin-based DSLï¼ŒæŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®
Fastlane Fastlaneæ˜¯ç”¨Rubyè¯­è¨€ç¼–å†™çš„ä¸€å¥—è‡ªåŠ¨åŒ–å·¥å…·é›†å’Œæ¡†æ¶ï¼Œæ¯ä¸€ä¸ªå·¥å…·å®é™…éƒ½å¯¹åº”ä¸€ä¸ªRubyè„šæœ¬ï¼Œç”¨æ¥æ‰§è¡ŒæŸä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼Œè€Œfastlaneæ ¸å¿ƒæ¡†æ¶åˆ™å…è®¸ä½¿ç”¨è€…é€šè¿‡ç±»ä¼¼é…ç½®æ–‡ä»¶çš„å½¢å¼ï¼Œå°†ä¸åŒçš„å·¥å…·æœ‰æœºè€Œçµæ´»çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œä»è€Œå½¢æˆä¸€ä¸ªä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚
ä¸‰ã€Appè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­å»ºæµç¨‹ ç¬¬ä¸€æ­¥ï¼Œæ­å»ºJenkinsï¼Œè¿™ä¸ªç½‘ä¸Šéƒ½æœ‰å¤§é‡æ•™ç¨‹ï¼Œæˆ‘å°±ä¸è¯¦ç»†èµ˜è¿°äº†ã€‚
ç¬¬äºŒæ­¥ï¼Œæ­å»ºAndroidã€IOSå¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œç½‘ä¸Šä¹Ÿæœ‰å¤§é‡æ•™ç¨‹ï¼Œä¸åœ¨èµ˜è¿°
ç¬¬ä¸‰æ­¥ï¼Œä¹¦å†™Jenkinsè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ï¼ŒJenkinsæ–°å»ºå¯¹åº”çš„ä»»åŠ¡
æ€»ä½“æ¥è¯´ï¼Œæ­å»ºAppè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­¥éª¤ä¸»è¦å°±è¿™3æ­¥ã€‚ä¸»è¦ä»‹ç»çš„å°±æ˜¯ç¬¬3æ­¥ï¼Œè¿™é‡Œç”¨æˆ‘ä»¬å·¥ç¨‹é‡Œçš„è„šæœ¬æ¥è¯¦ç»†è¯´æ˜ï¼Œæ¯è¡Œå‘½ä»¤çš„ä½œç”¨ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 pipeline { agent any parameters { string(name: &amp;#39;EMAIL&amp;#39;, defaultValue: &amp;#39;liang@xyz.">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu5046a004738fe6196f796d96e16bab8b_7661_300x0_resize_q75_box.jpeg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">éƒ­ç¿°æ—çš„åšå®¢</a></h1>
            <h2 class="site-description">ç§»åŠ¨ç«¯å¼€å‘å·¥ç¨‹å¸ˆ</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/RmondJone/'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/RmondJone'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>é¦–é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>æ–‡ç« </span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E%E6%88%91/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å…³äºæˆ‘</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#ä¸€å‰è¨€">ä¸€ã€å‰è¨€</a></li>
        <li><a href="#äºŒåŸºç¡€æ¦‚å¿µä»‹ç»">äºŒã€åŸºç¡€æ¦‚å¿µä»‹ç»</a></li>
        <li><a href="#ä¸‰appè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­å»ºæµç¨‹">ä¸‰ã€Appè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­å»ºæµç¨‹</a></li>
        <li><a href="#å››androidiosæ‰“åŒ…è„šæœ¬è¯¦è§£">å››ã€Androidã€IOSæ‰“åŒ…è„šæœ¬è¯¦è§£</a></li>
        <li><a href="#äº”jenkinsé‡Œçš„ä»»åŠ¡é…ç½®">äº”ã€Jenkinsé‡Œçš„ä»»åŠ¡é…ç½®</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/devops/" style="background-color: #2a9d8f; color: #fff;">
                DevOps
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/devops/app_ci/">Appè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„æ­å»ºä¸ç»´æŠ¤</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Apr 07, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 8 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h3 id="ä¸€å‰è¨€">ä¸€ã€å‰è¨€</h3>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæµ‹è¯•é˜¶æ®µéœ€è¦å¼€å‘å»æ‰‹åŠ¨æ‰“åŒ…ï¼Œè¿™æ ·æ•ˆç‡å¾ˆä½ä¸‹ï¼Œè€Œä¸”å¦‚æœå¼€å‘æ­£åœ¨å…¶ä»–åˆ†æ”¯æˆ–è€…æ­£åœ¨å¼€å‘ï¼Œæ‰“åŒ…ä¹Ÿéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªèƒŒæ™¯ä¸‹ï¼Œè‡ªåŠ¨åŒ–æ‰“åŒ…å¹³å°çš„è¯ç”Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<h3 id="äºŒåŸºç¡€æ¦‚å¿µä»‹ç»">äºŒã€åŸºç¡€æ¦‚å¿µä»‹ç»</h3>
<ul>
<li>
<p>Jenkins
Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œç”¨äºç›‘æ§æŒç»­é‡å¤çš„å·¥ä½œï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶é¡¹ç›®å¯ä»¥è¿›è¡ŒæŒç»­é›†æˆ</p>
</li>
<li>
<p>Gradle
Gradleæ˜¯ä¸€ä¸ªåŸºäºApache Antå’ŒApache Mavenæ¦‚å¿µçš„é¡¹ç›®è‡ªåŠ¨åŒ–æ„å»ºå¼€æºå·¥å…·ã€‚å®ƒä½¿ç”¨ä¸€ç§åŸºäºGroovyçš„ç‰¹å®šé¢†åŸŸè¯­è¨€(DSL)æ¥å£°æ˜é¡¹ç›®è®¾ç½®ï¼Œç›®å‰ä¹Ÿå¢åŠ äº†åŸºäºKotlinè¯­è¨€çš„kotlin-based DSLï¼ŒæŠ›å¼ƒäº†åŸºäºXMLçš„å„ç§ç¹çé…ç½®</p>
</li>
<li>
<p>Fastlane
Fastlaneæ˜¯ç”¨Rubyè¯­è¨€ç¼–å†™çš„ä¸€å¥—è‡ªåŠ¨åŒ–å·¥å…·é›†å’Œæ¡†æ¶ï¼Œæ¯ä¸€ä¸ªå·¥å…·å®é™…éƒ½å¯¹åº”ä¸€ä¸ªRubyè„šæœ¬ï¼Œç”¨æ¥æ‰§è¡ŒæŸä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼Œè€Œfastlaneæ ¸å¿ƒæ¡†æ¶åˆ™å…è®¸ä½¿ç”¨è€…é€šè¿‡ç±»ä¼¼é…ç½®æ–‡ä»¶çš„å½¢å¼ï¼Œå°†ä¸åŒçš„å·¥å…·æœ‰æœºè€Œçµæ´»çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œä»è€Œå½¢æˆä¸€ä¸ªä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
</li>
</ul>
<h3 id="ä¸‰appè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­å»ºæµç¨‹">ä¸‰ã€Appè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­å»ºæµç¨‹</h3>
<ul>
<li>
<p>ç¬¬ä¸€æ­¥ï¼Œæ­å»ºJenkinsï¼Œè¿™ä¸ªç½‘ä¸Šéƒ½æœ‰å¤§é‡æ•™ç¨‹ï¼Œæˆ‘å°±ä¸è¯¦ç»†èµ˜è¿°äº†ã€‚</p>
</li>
<li>
<p>ç¬¬äºŒæ­¥ï¼Œæ­å»ºAndroidã€IOSå¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œç½‘ä¸Šä¹Ÿæœ‰å¤§é‡æ•™ç¨‹ï¼Œä¸åœ¨èµ˜è¿°</p>
</li>
<li>
<p>ç¬¬ä¸‰æ­¥ï¼Œä¹¦å†™Jenkinsè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ï¼ŒJenkinsæ–°å»ºå¯¹åº”çš„ä»»åŠ¡</p>
</li>
</ul>
<p>æ€»ä½“æ¥è¯´ï¼Œæ­å»ºAppè‡ªåŠ¨åŒ–æ‰“åŒ…çš„æ­¥éª¤ä¸»è¦å°±è¿™3æ­¥ã€‚ä¸»è¦ä»‹ç»çš„å°±æ˜¯ç¬¬3æ­¥ï¼Œè¿™é‡Œç”¨æˆ‘ä»¬å·¥ç¨‹é‡Œçš„è„šæœ¬æ¥è¯¦ç»†è¯´æ˜ï¼Œæ¯è¡Œå‘½ä»¤çš„ä½œç”¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">pipeline {
</span></span><span class="line"><span class="cl">    agent any
</span></span><span class="line"><span class="cl">    parameters {
</span></span><span class="line"><span class="cl">        string(name: &#39;EMAIL&#39;, defaultValue: &#39;liang@xyz.cn&#39;, description: &#39;ç¼–è¯‘ä»»åŠ¡ç»“æŸæ—¶é€šçŸ¥çš„é‚®ç®±&#39;)
</span></span><span class="line"><span class="cl">        string(name: &#39;PGYER_DESCRIPTION&#39;, defaultValue: &#39;&#39;, description: &#39;æ­¤æ¬¡æ‰“åŒ…å¤‡æ³¨(å¯é€‰,é»˜è®¤æ˜¾ç¤ºåˆ†æ”¯å’Œæ­¤æ¬¡ä»»åŠ¡Build ID)&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        choice(choices: [&#39;ANDROID&#39;,&#39;IOS&#39;], description: &#39;ç¼–è¯‘å“ªä¸ªå¹³å°?&#39;, name: &#39;BUILD_PLATFORM&#39;)
</span></span><span class="line"><span class="cl">        choice(choices: [&#39;Debug&#39;, &#39;Preview&#39;, &#39;Release&#39;], description: &#39;ç¼–è¯‘ä»€ä¹ˆç‰ˆæœ¬?(Android Pç‰ˆè¯·é€‰æ‹©Previewä¸è¦ç”¨Release!!!)&#39;, name: &#39;BUILD_TYPE&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        string(name: &#39;FILE_NAME&#39;, defaultValue: &#39;xyz_app&#39;, description: &#39;è¾“å‡ºå®‰è£…åŒ…çš„æ–‡ä»¶å(å°½é‡è‹±æ–‡),ä¸èƒ½ä¸ºç©º&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        string(name: &#39;API_HOST&#39;, defaultValue: &#39;&#39;, description: &#39;æ¥å£åœ°å€,ä¸æ”¹å°±ç•™ç©º&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        string(name: &#39;BUILD_VERSION_NAME&#39;, defaultValue: &#39;&#39;, description: &#39;ç‰ˆæœ¬å·(æ ¼å¼:x.y.z),ä¸æ”¹å°±ç•™ç©º&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        string(name: &#39;PGYER_API_KEY&#39;, defaultValue: &#39;43aad9a3e16b23382b6350e05546db49&#39;, description: &#39;è’²å…¬è‹±åˆ†å‘api key,ä¸æ‡‚è¯·ä¿æŒé»˜è®¤&#39;)
</span></span><span class="line"><span class="cl">        string(name: &#39;PGYER_USER_KEY&#39;, defaultValue: &#39;35f87a2f64bde6cfed825ae188e2c1f0&#39;, description: &#39;è’²å…¬è‹±åˆ†å‘user key,ä¸æ‡‚è¯·ä¿æŒé»˜è®¤&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        booleanParam(name:&#39;UPDATE_POD&#39;,defaultValue:false,description:&#39;æ˜¯å¦æ›´æ–°Podåº“?&#39;)
</span></span><span class="line"><span class="cl">        choice(name:&#39;POD_REPO&#39;,choices:[&#34;xyz-appdev-spec&#34;,&#34;artsy&#34;,&#34;master&#34;],description:&#39;å…·ä½“æ›´æ–°å“ªä¸€ä¸ªPodåº“&#39;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        booleanParam(name:&#39;GRADLE_OFFLINE&#39;,defaultValue:true,description:&#39;æ˜¯å¦é‡‡ç”¨Gradleç¦»çº¿æ¨¡å¼?&#39;)
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    environment {
</span></span><span class="line"><span class="cl">        LANG = &#34;en_US.UTF-8&#34;
</span></span><span class="line"><span class="cl">        //sentry cli cdn é“¾æ¥
</span></span><span class="line"><span class="cl">        SENTRYCLI_CDNURL = &#39;http://cdn.npm.taobao.org/dist/sentry-cli&#39;
</span></span><span class="line"><span class="cl">		    //è’²å…¬è‹± ipaè·¯å¾„
</span></span><span class="line"><span class="cl">		    PGYER_IPA = &#34;./build/XYZ_iOS.ipa&#34;
</span></span><span class="line"><span class="cl">		    //è’²å…¬è‹± ä¸Šä¼ æè¿°
</span></span><span class="line"><span class="cl">		    PGYER_UPDATE_DESCRIPTION = &#34;Jenkinsä»»åŠ¡å·: ã€${BUILD_DISPLAY_NAME}ã€‘ æœ¬æ¬¡ç¼–è¯‘çš„åˆ†æ”¯:ã€${BRANCH_NAME}ã€‘  ç¼–è¯‘ç±»å‹:ã€${params.BUILD_TYPE}ã€‘  é¢å¤–å¤‡æ³¨:ã€${params.PGYER_DESCRIPTION}ã€‘&#34;
</span></span><span class="line"><span class="cl">        //ios è¾“å‡ºç›®å½•
</span></span><span class="line"><span class="cl">        GYM_OUTPUT_DIRECTORY = &#34;./build&#34;
</span></span><span class="line"><span class="cl">		    //testFlight ipa è·¯å¾„
</span></span><span class="line"><span class="cl">		    PILOT_IPA = &#34;${PGYER_IPA}&#34;
</span></span><span class="line"><span class="cl">		    //testFlight å‡çº§æè¿°
</span></span><span class="line"><span class="cl">		    PILOT_BETA_APP_DESCRIPTION = &#34;${PGYER_UPDATE_DESCRIPTION}&#34;
</span></span><span class="line"><span class="cl">		    FL_VERSION_NUMBER_VERSION_NUMBER = &#34;${params.BUILD_VERSION_NAME}&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    tools {
</span></span><span class="line"><span class="cl">        nodejs &#34;nodejs&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    stages {
</span></span><span class="line"><span class="cl">        stage(&#39;Prepare&#39;) {
</span></span><span class="line"><span class="cl">            steps {
</span></span><span class="line"><span class="cl">                sh &#34;mkdir build &amp;&amp; printenv &amp;&amp; printenv &gt; build/env.txt&#34;
</span></span><span class="line"><span class="cl">                script {
</span></span><span class="line"><span class="cl">                    if(&#34;${params.BUILD_TYPE}&#34; !=&#34;Debug&#34;){
</span></span><span class="line"><span class="cl">                      sh &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                          sed -i &#34;s#sensorsAnalytics.disablePlugin=true#sensorsAnalytics.disablePlugin=false#g&#34; android/gradle.properties
</span></span><span class="line"><span class="cl">                      &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                      sh &#34;cat android/gradle.properties&#34;
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                    sh &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                        sed -i &#34;s#{...getPersistenceFunctions(pageName)}##g&#34; app/entry/App.js
</span></span><span class="line"><span class="cl">                    &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                    sh &#34;cat app/entry/App.js&#34;
</span></span><span class="line"><span class="cl">                    if(&#34;${params.BUILD_VERSION_NAME}&#34; != &#34;&#34;){
</span></span><span class="line"><span class="cl">                      sh &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                         sed -i &#34;s/\\(VersionName=\\)\\([0-9]\\{1,\\}\\.[0-9]\\{1,\\}\\.[0-9]\\{1,\\}\\)/\\1${BUILD_VERSION_NAME}/g&#34; android/gradle.properties
</span></span><span class="line"><span class="cl">                      &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                      sh &#34;cat android/gradle.properties&#34;
</span></span><span class="line"><span class="cl">                      sh &#34;cd ios &amp;&amp; fastlane build_version&#34;
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                    if(&#34;${params.API_HOST}&#34; != &#34;&#34;){
</span></span><span class="line"><span class="cl">                      sh &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                         sed -i &#34;s#https://app\\.xyz\\.cn#${API_HOST}#g&#34; android/app/src/main/java/com/focustech/xyz/network/configuration/Host.java
</span></span><span class="line"><span class="cl">                      &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                      sh &#34;cat android/app/src/main/java/com/focustech/xyz/network/configuration/Host.java&#34;
</span></span><span class="line"><span class="cl">                      sh &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                         sed -i &#34;s#https://app\\.xyz\\.cn#${API_HOST}#g&#34; ios/XYZ_iOS/Resources/Plists/NetEnvironment.json
</span></span><span class="line"><span class="cl">                      &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                      sh &#34;cat ios/XYZ_iOS/Resources/Plists/NetEnvironment.json&#34;
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                    if(params.UPDATE_POD &amp;&amp; &#34;${params.BUILD_PLATFORM}&#34;==&#39;IOS&#39;){
</span></span><span class="line"><span class="cl">                       sh &#34;cd ios &amp;&amp; pod repo update ${params.POD_REPO}&#34;
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">				        }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">        stage(&#39;Build&#39;) {
</span></span><span class="line"><span class="cl">            when { expression { return !params.UPDATE_POD } }
</span></span><span class="line"><span class="cl">            steps {
</span></span><span class="line"><span class="cl">                script {
</span></span><span class="line"><span class="cl">                    sh &#39;npm install&#39;
</span></span><span class="line"><span class="cl">                    if (&#34;${params.BUILD_PLATFORM}&#34;  == &#39;ANDROID&#39;) {
</span></span><span class="line"><span class="cl">                        if(params.GRADLE_OFFLINE){
</span></span><span class="line"><span class="cl">                            if (&#34;${params.BUILD_TYPE}&#34;  == &#34;Preview&#34;){
</span></span><span class="line"><span class="cl">                              sh &#34;cd android &amp;&amp; bash gradlew --build-cache --offline assembleRelease&#34;
</span></span><span class="line"><span class="cl">                            }else if(&#34;${params.BUILD_TYPE}&#34;  == &#34;Release&#34;){
</span></span><span class="line"><span class="cl">                              sh &#34;cd android &amp;&amp; bash gradlew --build-cache --offline buildReinforceRelease&#34;
</span></span><span class="line"><span class="cl">                            }else {
</span></span><span class="line"><span class="cl">                              sh &#34;cd android &amp;&amp; bash gradlew --build-cache --offline assemble${params.BUILD_TYPE}&#34;
</span></span><span class="line"><span class="cl">                            }
</span></span><span class="line"><span class="cl">                        }else{
</span></span><span class="line"><span class="cl">                            if (&#34;${params.BUILD_TYPE}&#34;  == &#34;Preview&#34;){
</span></span><span class="line"><span class="cl">                              sh &#34;cd android &amp;&amp; bash gradlew --build-cache assembleRelease&#34;
</span></span><span class="line"><span class="cl">                            }else if(&#34;${params.BUILD_TYPE}&#34;  == &#34;Release&#34;){
</span></span><span class="line"><span class="cl">                              sh &#34;cd android &amp;&amp; bash gradlew --build-cache buildReinforceRelease&#34;
</span></span><span class="line"><span class="cl">                            }else {
</span></span><span class="line"><span class="cl">                              sh &#34;cd android &amp;&amp; bash gradlew --build-cache assemble${params.BUILD_TYPE}&#34;
</span></span><span class="line"><span class="cl">                            }
</span></span><span class="line"><span class="cl">                        }
</span></span><span class="line"><span class="cl">                    } else if (&#34;${params.BUILD_PLATFORM}&#34;  == &#39;IOS&#39;){
</span></span><span class="line"><span class="cl">                        sh &#39;cd ios &amp;&amp; pod install --verbose&#39;
</span></span><span class="line"><span class="cl">                        if(&#34;${params.BUILD_TYPE}&#34;  == &#39;Debug&#39;){
</span></span><span class="line"><span class="cl">                          sh &#39;cd ios &amp;&amp; fastlane build&#39;
</span></span><span class="line"><span class="cl">                        } else{
</span></span><span class="line"><span class="cl">                          sh &#39;cd ios &amp;&amp; fastlane build_ts&#39;
</span></span><span class="line"><span class="cl">                        }
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">        stage(&#39;Deploy&#39;) {
</span></span><span class="line"><span class="cl">            when { expression { return !params.UPDATE_POD } }
</span></span><span class="line"><span class="cl">            steps {
</span></span><span class="line"><span class="cl">                script {
</span></span><span class="line"><span class="cl">                    archiveArtifacts artifacts: &#39;build/env.txt&#39;
</span></span><span class="line"><span class="cl">                    if (&#34;${params.BUILD_PLATFORM}&#34;  == &#39;ANDROID&#39;) {
</span></span><span class="line"><span class="cl">                        if(&#34;${params.BUILD_TYPE}&#34; == &#39;Release&#39;){
</span></span><span class="line"><span class="cl">                            sh &#34;mv android/app/build/outputs/apk/release/*.apk build/${FILE_NAME}-${BUILD_TYPE}.apk&#34;
</span></span><span class="line"><span class="cl">                            sh &#34;zip -r android/app/build/outputs/apk/release/${FILE_NAME}.zip android/app/build/outputs/apk/release/channels/&#34;
</span></span><span class="line"><span class="cl">                            sh &#34;mv android/app/build/outputs/apk/release/${FILE_NAME}.zip build/&#34;
</span></span><span class="line"><span class="cl">                            archiveArtifacts artifacts: &#34;build/*.apk&#34;
</span></span><span class="line"><span class="cl">                            archiveArtifacts artifacts: &#34;build/*.zip&#34;
</span></span><span class="line"><span class="cl">                        }else if(&#34;${params.BUILD_TYPE}&#34; == &#39;Debug&#39;) {
</span></span><span class="line"><span class="cl">                            sh &#34;mv android/app/build/outputs/apk/debug/*.apk build/${FILE_NAME}-${BUILD_TYPE}.apk&#34;
</span></span><span class="line"><span class="cl">                            archiveArtifacts artifacts: &#34;build/${FILE_NAME}-${BUILD_TYPE}.apk&#34;
</span></span><span class="line"><span class="cl">                        }else if(&#34;${params.BUILD_TYPE}&#34; == &#39;Preview&#39;) {
</span></span><span class="line"><span class="cl">                            sh &#34;mv android/app/build/outputs/apk/release/*.apk build/${FILE_NAME}-${BUILD_TYPE}.apk&#34;
</span></span><span class="line"><span class="cl">                            archiveArtifacts artifacts: &#34;build/${FILE_NAME}-${BUILD_TYPE}.apk&#34;
</span></span><span class="line"><span class="cl">                        }
</span></span><span class="line"><span class="cl">                        sh &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                            curl -F &#34;file=@build/${FILE_NAME}-${BUILD_TYPE}.apk&#34; -F &#34;userKey=${PGYER_USER_KEY}&#34; -F &#34;_api_key=${PGYER_API_KEY}&#34; -F &#34;buildInstallType=2&#34; -F &#34;buildPassword=123456&#34; -F &#34;buildUpdateDescription=${PGYER_UPDATE_DESCRIPTION}&#34; http://www.pgyer.com/apiv2/app/upload
</span></span><span class="line"><span class="cl">                        &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                    } else if (&#34;${params.BUILD_PLATFORM}&#34;  == &#39;IOS&#39;){
</span></span><span class="line"><span class="cl">                        archiveArtifacts artifacts: &#34;ios/build/*.ipa&#34;
</span></span><span class="line"><span class="cl">                        archiveArtifacts artifacts: &#34;ios/build/*.app.dSYM.zip&#34;
</span></span><span class="line"><span class="cl">                        sh &#34;mv ios/build/*.ipa build/${FILE_NAME}-${BUILD_TYPE}.ipa&#34;
</span></span><span class="line"><span class="cl">                        sh &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                           curl -F &#34;file=@build/${FILE_NAME}-${BUILD_TYPE}.ipa&#34; -F &#34;userKey=${PGYER_USER_KEY}&#34; -F &#34;_api_key=${PGYER_API_KEY}&#34; -F &#34;buildInstallType=2&#34; -F &#34;buildPassword=123456&#34; -F &#34;buildUpdateDescription=${PGYER_UPDATE_DESCRIPTION}&#34; http://www.pgyer.com/apiv2/app/upload
</span></span><span class="line"><span class="cl">                       &#39;&#39;&#39;
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    post {
</span></span><span class="line"><span class="cl">        failure {
</span></span><span class="line"><span class="cl">            emailext attachLog: true, attachmentsPattern: &#39;build/**&#39;, body: &#34;jenkinsä»»åŠ¡å¤±è´¥!  ${PGYER_UPDATE_DESCRIPTION}  è¯¦æƒ…è¯·ç‚¹å‡»:${BUILD_URL} æˆ–ç›´æ¥ä»é™„ä»¶ä¸‹è½½ç¼–è¯‘logè‡ªè¡ŒæŸ¥çœ‹!&#34;, compressLog: true, replyTo: &#39;&#39;, subject: &#39;jenkinsä»»åŠ¡å¤±è´¥,è¯·æ’æŸ¥é—®é¢˜&#39;, to: &#39;${EMAIL}&#39;
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">        aborted {
</span></span><span class="line"><span class="cl">            emailext attachLog: true, attachmentsPattern: &#39;build/**&#39;, body: &#34;jenkinsä»»åŠ¡ä¸­æ­¢!  ${PGYER_UPDATE_DESCRIPTION}  è¯¦æƒ…è¯·ç‚¹å‡»:${BUILD_URL}&#34;, compressLog: true, replyTo: &#39;&#39;, subject: &#39;jenkinsä»»åŠ¡å·²ä¸­æ­¢&#39;, to: &#39;${EMAIL}&#39;
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">        success {
</span></span><span class="line"><span class="cl">            script {
</span></span><span class="line"><span class="cl">              if(!params.UPDATE_POD){
</span></span><span class="line"><span class="cl">                if (&#34;${params.BUILD_PLATFORM}&#34;  == &#39;ANDROID&#39;) {
</span></span><span class="line"><span class="cl">                  def packPath = &#34;build/${FILE_NAME}-${BUILD_TYPE}.apk&#34;
</span></span><span class="line"><span class="cl">                  echo &#34;packPath:${packPath}&#34;
</span></span><span class="line"><span class="cl">                  def packInfo = &#34;&#34;&#34;${sh(returnStdout: true, script: &#34;du -s ${packPath}&#34;)}&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">                  def packSize = packInfo.substring(0, packInfo.indexOf(&#39;	&#39;))
</span></span><span class="line"><span class="cl">                  echo &#34;packSize:${packSize}&#34;
</span></span><span class="line"><span class="cl">                  def packSizeMb = packSize.toInteger() / 2 / 1000
</span></span><span class="line"><span class="cl">                  def packSizeMbStr = &#34;&#34; + packSizeMb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                  if(&#34;${params.BUILD_TYPE}&#34; == &#39;Preview&#39;){
</span></span><span class="line"><span class="cl">                    if(packSizeMb &gt; 40){
</span></span><span class="line"><span class="cl">                      emailext body: &#34;ä»»åŠ¡${BUILD_DISPLAY_NAME}å®‰å“PreviewåŒ…å¤§å°å·²ç»è¶…è¿‡40Mbï¼Œç°å·²è¾¾åˆ°${packSizeMbStr}Mbï¼&#34;, compressLog: true, replyTo: &#39;&#39;, subject: &#39;ä»»åŠ¡${BUILD_DISPLAY_NAME}å®‰å“PreviewåŒ…å¤§å°å·²ç»è¶…è¿‡40Mbï¼&#39;, to: &#39;zhangwenxin@xyz.cn;guohanlin@xyz.cn;jinwenwu@xyz.cn;jinjianxin@xyz.cn&#39;
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                  }
</span></span><span class="line"><span class="cl">                }else if (&#34;${params.BUILD_PLATFORM}&#34;  == &#39;IOS&#39;){
</span></span><span class="line"><span class="cl">                  def packPath = &#34;build/${FILE_NAME}-${BUILD_TYPE}.ipa&#34;
</span></span><span class="line"><span class="cl">                  echo &#34;packPath:${packPath}&#34;
</span></span><span class="line"><span class="cl">                  def packInfo = &#34;&#34;&#34;${sh(returnStdout: true, script: &#34;du -s ${packPath}&#34;)}&#34;&#34;&#34;
</span></span><span class="line"><span class="cl">                  def packSize = packInfo.substring(0, packInfo.indexOf(&#39;	&#39;))
</span></span><span class="line"><span class="cl">                  echo &#34;packSize:${packSize}&#34;
</span></span><span class="line"><span class="cl">                  def packSizeMb = packSize.toInteger() / 2 / 1000
</span></span><span class="line"><span class="cl">                  def packSizeMbStr = &#34;&#34; + packSizeMb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                  if(&#34;${params.BUILD_TYPE}&#34; == &#39;Preview&#39;){
</span></span><span class="line"><span class="cl">                    if(packSizeMb &gt; 40){
</span></span><span class="line"><span class="cl">                      emailext body: &#34;ä»»åŠ¡${BUILD_DISPLAY_NAME}è‹¹æœPreviewåŒ…å¤§å°å·²ç»è¶…è¿‡40Mbï¼Œç°å·²è¾¾åˆ°${packSizeMbStr}Mbï¼&#34;, compressLog: true, replyTo: &#39;&#39;, subject: &#39;ä»»åŠ¡${BUILD_DISPLAY_NAME}è‹¹æœPreviewåŒ…å¤§å°å·²ç»è¶…è¿‡40Mbï¼&#39;, to: &#39;zhangwenxin@xyz.cn;guohanlin@xyz.cn;jinwenwu@xyz.cn;jinjianxin@xyz.cn&#39;
</span></span><span class="line"><span class="cl">                    }
</span></span><span class="line"><span class="cl">                  }
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">              }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">            script {
</span></span><span class="line"><span class="cl">               if(!params.UPDATE_POD){
</span></span><span class="line"><span class="cl">                  if(&#34;${params.BUILD_PLATFORM}&#34;==&#34;IOS&#34;){
</span></span><span class="line"><span class="cl">                    emailext body: &#34;jenkinsä»»åŠ¡æˆåŠŸ! ${PGYER_UPDATE_DESCRIPTION} è¯¦æƒ…è¯·ç‚¹å‡»:${BUILD_URL} æˆ–ç›´æ¥é€šè¿‡è’²å…¬è‹±ä¸‹è½½! iOSä¸‹è½½é“¾æ¥ http://www.pgyer.com/xyz_ios&#34;, compressLog: true, replyTo: &#39;&#39;, subject: &#39;jenkinsä»»åŠ¡æˆåŠŸ,è¯·ä¸‹è½½å®‰è£…&#39;, to: &#39;${EMAIL}&#39;
</span></span><span class="line"><span class="cl">                  } else{
</span></span><span class="line"><span class="cl">                    emailext body: &#34;jenkinsä»»åŠ¡æˆåŠŸ! ${PGYER_UPDATE_DESCRIPTION} è¯¦æƒ…è¯·ç‚¹å‡»:${BUILD_URL} æˆ–ç›´æ¥é€šè¿‡è’²å…¬è‹±ä¸‹è½½! Androidä¸‹è½½é“¾æ¥ http://www.pgyer.com/xyz_android&#34;, compressLog: true, replyTo: &#39;&#39;, subject: &#39;jenkinsä»»åŠ¡æˆåŠŸ,è¯·ä¸‹è½½å®‰è£…&#39;, to: &#39;${EMAIL}&#39;
</span></span><span class="line"><span class="cl">                  }
</span></span><span class="line"><span class="cl">               }
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>é¦–å…ˆæˆ‘ä»¬æ¥å¤§è‡´è¯´ä¸‹è¿™ä¸ªæ–‡ä»¶çš„å¤§æ¦‚æ„æ€ï¼Œç½‘ä¸Šä¹Ÿæœ‰æ•™ç¨‹ä¸æ˜ç™½çš„ï¼Œå¯ä»¥å†ä¸Šç½‘å¤šæ‰¾æ‰¾èµ„æ–™ã€‚</p>
<p>ç¬¬ä¸€å¤§å—<strong>parameters</strong>ï¼Œè¿™é‡Œé¢ä¸»è¦å®šä¹‰äº†ä¸€äº›ä»»åŠ¡çš„å‚æ•°ï¼Œä¾‹å¦‚æˆ‘è¦æ‰“å“ªä¸ªå¹³å°çš„åŒ…å•Šã€ç‰ˆæœ¬å·å•Šã€é‚®ä»¶é€šçŸ¥å•Šè¿™äº›ã€‚</p>
<p>ç¬¬äºŒå¤§å—<strong>environment</strong>ï¼Œè¿™é‡Œé¢ä¸»è¦å®šä¹‰äº†ä¸€äº›ä»»åŠ¡æ‰§è¡Œçš„ç¯å¢ƒä»¥åŠé¢„å®šä¹‰çš„ä¸€äº›å…¨å±€çš„ç¯å¢ƒå˜é‡</p>
<p>ç¬¬ä¸‰å¤§å—<strong>stages</strong>ï¼Œè¿™é‡Œæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€å—å†…å®¹ï¼Œè¿™é‡Œä¸»è¦å®šä¹‰äº†ä¸€äº›ä»»åŠ¡çš„é˜¶æ®µæ€§ä»»åŠ¡ï¼Œä»¥åŠè¿™ä¸ªé˜¶æ®µæ€§ä»»åŠ¡æ‰§è¡Œå“ªäº›è„šæœ¬ã€‚</p>
<p>å°±å¥½åƒä¸Šé¢çš„è„šæœ¬ï¼Œæˆ‘æŠŠæ•´ä¸ªå¤§ä»»åŠ¡åˆ†ä¸ºäº†3ä¸ªå­ä»»åŠ¡ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå­ä»»åŠ¡<strong>stage(&lsquo;Prepare&rsquo;ï¼‰</strong>ï¼Œä¸»è¦å®šä¹‰äº†ä¸€äº›æˆ‘è¦æ‰“åŒ…å‰éœ€è¦åšçš„ä¸€äº›äº‹æƒ…ï¼Œä¾‹å¦‚æ‰§è¡Œnpmã€æ›¿æ¢å·¥ç¨‹ä¸­éƒ¨åˆ†ä»£ç ç­‰ç­‰ã€‚</li>
<li>ç¬¬äºŒä¸ªå­ä»»åŠ¡<strong>stage(&lsquo;Build&rsquo;)</strong>ï¼Œä¸»è¦å°±æ˜¯æ‰§è¡ŒçœŸæ­£çš„æ‰“åŒ…æµç¨‹ï¼Œä¾‹å¦‚Androidèµ°äº†Gradleè„šæœ¬å»æ‰§è¡Œæ‰“åŒ…ï¼ŒIOSèµ°äº†FastLaneå»æ‰§è¡Œæ‰“åŒ…ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªå­ä»»åŠ¡<strong>stage(&lsquo;Deploy&rsquo;)</strong>ï¼Œä¸»è¦æ‰§è¡Œæ‰“åŒ…å®Œä¹‹åçš„ä¸€äº›æ“ä½œï¼Œä¾‹å¦‚æ‰“å‡ºçš„åŒ…çš„å½’æ¡£æ“ä½œã€åŒ…å¤§å°æ£€æµ‹ã€ä¸Šä¼ è’²å…¬è‹±æ“ä½œã€ä¸Šä¼ è’²å…¬è‹±ä¹‹åé‚®ä»¶é€šçŸ¥æ“ä½œ</li>
</ul>
<h3 id="å››androidiosæ‰“åŒ…è„šæœ¬è¯¦è§£">å››ã€Androidã€IOSæ‰“åŒ…è„šæœ¬è¯¦è§£</h3>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹Androidï¼Œè¿™é‡Œéœ€è¦ä½ æœ‰ä¸€å®šçš„GradleåŸºç¡€ï¼Œå¯ä»¥è‡ªå·±å†™ç®€å•çš„Gradleä»»åŠ¡ã€‚ä»ä¸Šé¢çš„Jenkinsè„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Androidåœ¨æ‰“åŒ…çš„æ—¶å€™ï¼ŒåŒºåˆ†äº†ç¼–è¯‘ç‰ˆæœ¬ï¼Œdebugå’Œpreviewçš„ç›´æ¥è°ƒç”¨Androidè‡ªå¸¦çš„æ‰“åŒ…è„šæœ¬assembleDebugã€assembleReleaseï¼ŒReleaseç‰ˆæœ¬ä¹Ÿå°±æ˜¯å‘å¸ƒç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä»¬åšäº†è‡ªå®šä¹‰Gradleè„šæœ¬<strong>buildReinforceRelease</strong>ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è‡ªå®šä¹‰ï¼Œå› ä¸ºé€šå¸¸æˆ‘ä»¬ä¸Šçº¿å‘å¸ƒçš„æ—¶å€™éƒ½éœ€è¦åŠ å›ºAPKå¹¶ä¸”åšå¤šæ¸ é“æ“ä½œã€‚å¦‚æœæ¯æ¬¡éƒ½å»æ‰‹åŠ¨ç”¨å·¥å…·æ“ä½œçš„è¯ï¼Œè¿™ä¸ªæ˜¯ä¸ªå¾ˆè›‹ç–¼çš„æ´»ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªè„šæœ¬é‡Œæœ‰ä»€ä¹ˆã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ext {
</span></span><span class="line"><span class="cl">    //åŠ å›ºæ’ä»¶è·¯å¾„
</span></span><span class="line"><span class="cl">    reinforce_plugin_path = &#34;${project.rootDir}/reinforce&#34;
</span></span><span class="line"><span class="cl">	//360åŠ å›ºè´¦å·
</span></span><span class="line"><span class="cl">    reinforce_plugin_name = &#39;xxxxxxxx&#39;
</span></span><span class="line"><span class="cl">    reinforce_plugin_passward = &#39;xxxxxxx&#39;
</span></span><span class="line"><span class="cl">    //ç­¾åä¿¡æ¯
</span></span><span class="line"><span class="cl">    key_store_path = &#34;${project.rootDir}/app/xyz.keystore&#34;
</span></span><span class="line"><span class="cl">    key_store_passward = &#39;xxxxxxxxx&#39;
</span></span><span class="line"><span class="cl">    alias = &#39;xxxx&#39;
</span></span><span class="line"><span class="cl">    alias_passward = &#39;xxxxxxxxxx&#39;
</span></span><span class="line"><span class="cl">    //Release Apkè¾“å‡ºè·¯åŠ²
</span></span><span class="line"><span class="cl">    release_apk_path = &#34;${project.buildDir}/outputs/apk/release/app-release.apk&#34;
</span></span><span class="line"><span class="cl">    //æ¸ é“é…ç½®æ–‡ä»¶
</span></span><span class="line"><span class="cl">    chanel_config_path = &#34;${reinforce_plugin_path}/channel.txt&#34;
</span></span><span class="line"><span class="cl">    //æ¸ é“Apkè¾“å‡ºè·¯å¾„
</span></span><span class="line"><span class="cl">    channel_apks_path = &#34;${project.buildDir}/outputs/apk/release/channels/&#34;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/**
</span></span><span class="line"><span class="cl"> * æ³¨é‡Šï¼šç¼–è¯‘åŠ å›ºæ¸ é“åŒ…
</span></span><span class="line"><span class="cl"> * æ—¶é—´ï¼š2019/1/2 0002 14:01
</span></span><span class="line"><span class="cl"> * ä½œè€…ï¼šéƒ­ç¿°æ—
</span></span><span class="line"><span class="cl"> */
</span></span><span class="line"><span class="cl">task buildReinforceRelease() {
</span></span><span class="line"><span class="cl">    group &#39;360reinforce&#39;
</span></span><span class="line"><span class="cl">    dependsOn(&#39;assembleRelease&#39;)
</span></span><span class="line"><span class="cl">    doLast {
</span></span><span class="line"><span class="cl">        //ç¬¬ä¸€æ­¥ï¼šæ¸…ç©ºç¼“å­˜
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/.cache&#34;)
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/output&#34;)
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/jiagu.db&#34;)
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/tempAndroidManifest.xml&#34;)
</span></span><span class="line"><span class="cl">        cleanFilesPath(channel_apks_path)
</span></span><span class="line"><span class="cl">        //ç¬¬äºŒæ­¥ï¼šå¼€å§‹åŠ å›º
</span></span><span class="line"><span class="cl">        reinforceApk()
</span></span><span class="line"><span class="cl">        //æ¸…é™¤æ— ç”¨ç¼“å­˜
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/.cache&#34;)
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/output&#34;)
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/jiagu.db&#34;)
</span></span><span class="line"><span class="cl">        cleanFilesPath(reinforce_plugin_path + &#34;/tempAndroidManifest.xml&#34;)
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/**
</span></span><span class="line"><span class="cl"> * æ³¨é‡Šï¼šä½¿ç”¨360åŠ å›ºåŠ å›ºReleaseåŒ…
</span></span><span class="line"><span class="cl"> * æ—¶é—´ï¼š2019/1/2 0002 14:32
</span></span><span class="line"><span class="cl"> * ä½œè€…ï¼šéƒ­ç¿°æ—
</span></span><span class="line"><span class="cl"> */
</span></span><span class="line"><span class="cl">def reinforceApk() {
</span></span><span class="line"><span class="cl">    println(&#39;å¼€å§‹è¿›è¡ŒåŠ å›ºæ“ä½œ&#39;)
</span></span><span class="line"><span class="cl">    File releaseApk = new File(release_apk_path)
</span></span><span class="line"><span class="cl">    if (!releaseApk.exists()) {
</span></span><span class="line"><span class="cl">        throw new FileNotFoundException(&#34;ReleaseåŒ…ä¸å­˜åœ¨ï¼Œæ— æ³•è¿›è¡ŒåŠ å›ºæ“ä½œ,æ–‡ä»¶è·¯å¾„ï¼š${releaseApk.getAbsolutePath()}&#34;)
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    //åˆ›å»ºæ¸ é“æ–‡ä»¶å¤¹
</span></span><span class="line"><span class="cl">    File channelApksPath = new File(channel_apks_path)
</span></span><span class="line"><span class="cl">    if (!channelApksPath.exists()) {
</span></span><span class="line"><span class="cl">        channelApksPath.mkdir()
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    exec {
</span></span><span class="line"><span class="cl">        commandLine &#34;bash&#34;, &#34;-c&#34;, &#34;chmod +x ${reinforce_plugin_path}/java/bin/*&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    exec {
</span></span><span class="line"><span class="cl">        commandLine &#34;bash&#34;, &#34;-c&#34;, &#34;java -jar ${reinforce_plugin_path}/jiagu.jar -login ${reinforce_plugin_name} ${reinforce_plugin_passward}&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    exec {
</span></span><span class="line"><span class="cl">        commandLine &#34;bash&#34;, &#34;-c&#34;, &#34;java -jar ${reinforce_plugin_path}/jiagu.jar -importsign ${key_store_path} ${key_store_passward} ${alias} ${alias_passward}&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    exec {
</span></span><span class="line"><span class="cl">        commandLine &#34;bash&#34;, &#34;-c&#34;, &#34;java -jar ${reinforce_plugin_path}/jiagu.jar -importmulpkg ${chanel_config_path}&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    exec {
</span></span><span class="line"><span class="cl">        commandLine &#34;bash&#34;, &#34;-c&#34;, &#34;java -jar ${reinforce_plugin_path}/jiagu.jar -jiagu ${release_apk_path} ${channel_apks_path} -autosign -automulpkg&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    println(&#39;åŠ å›ºæ“ä½œç»“æŸï¼ŒåŠ å›ºåŒ…è·¯å¾„&#39; + channelApksPath.getAbsolutePath())
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/**
</span></span><span class="line"><span class="cl"> * æ³¨é‡Šï¼šæ¸…ç©ºæ–‡ä»¶å¤¹
</span></span><span class="line"><span class="cl"> * æ—¶é—´ï¼š2019/1/2 0002 14:15
</span></span><span class="line"><span class="cl"> * ä½œè€…ï¼šéƒ­ç¿°æ—
</span></span><span class="line"><span class="cl"> */
</span></span><span class="line"><span class="cl">def cleanFilesPath(String path) {
</span></span><span class="line"><span class="cl">    File files = new File(path)
</span></span><span class="line"><span class="cl">    if (!files.exists()) {
</span></span><span class="line"><span class="cl">        return
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    println(&#39;å¼€å§‹æ‰§è¡Œæ¸…é™¤:&#39; + files.getAbsolutePath())
</span></span><span class="line"><span class="cl">    if (files.isDirectory()) {
</span></span><span class="line"><span class="cl">        String[] content = files.list()//å–å¾—å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
</span></span><span class="line"><span class="cl">        for (String name : content) {
</span></span><span class="line"><span class="cl">            File temp = new File(path, name)
</span></span><span class="line"><span class="cl">            if (temp.isDirectory()) {//åˆ¤æ–­æ˜¯å¦æ˜¯ç›®å½•
</span></span><span class="line"><span class="cl">                cleanFilesPath(temp.getAbsolutePath())//é€’å½’è°ƒç”¨ï¼Œåˆ é™¤ç›®å½•é‡Œçš„å†…å®¹
</span></span><span class="line"><span class="cl">                temp.delete()
</span></span><span class="line"><span class="cl">            } else {
</span></span><span class="line"><span class="cl">                temp.delete()
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    files.delete()
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†360åŠ å›ºæ¥æ‰§è¡ŒåŠ å›ºå’Œæ‰“æ¸ é“åŒ…çš„æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆå»æŠŠ360åŠ å›ºå¼•åˆ°å·¥ç¨‹é‡Œå‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œç›´æ¥360å®˜ç½‘ä¸‹è½½ï¼Œç„¶åç›´æ¥æ‹‰360å®‰è£…è·¯å¾„çš„æ–‡ä»¶å¤¹åˆ°å·¥ç¨‹é‡Œã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/360_jiagu.webp"
	
	
	
	loading="lazy"
	
	
></p>
<p>Androidçš„éƒ¨åˆ†å°±ä»‹ç»åˆ°è¿™ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹IOSæ‰“åŒ…è„šæœ¬éƒ¨åˆ†ï¼Œå‰é¢è¯´åˆ°IOSæ˜¯é€šè¿‡FastLaneå»å®ç°æ‰“åŒ…çš„ï¼Œä½†ä¼—æ‰€å‘¨çŸ¥ï¼ŒIOSæ‰“åŒ…éœ€è¦è¯ä¹¦ä»¥åŠç­¾åï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨FastLaneè„šæœ¬é‡Œæ”¹æ€ä¹ˆå»é…ç½®ï¼Ÿ</p>
<p>å…³äºFastlaneæ€ä¹ˆé›†æˆï¼Œæ€ä¹ˆéƒ¨ç½²ç½‘ä¸Šéƒ½æœ‰æ•™ç¨‹è¿™é‡Œä¸å»èµ˜è¿°ï¼Œè¿™é‡Œä¸»è¦è¯´çš„å°±æ˜¯Fastlaneé‡Œçš„è„šæœ¬è¯¥å¦‚ä½•å»ä¹¦å†™ï¼Œæ€ä¹ˆå»é…ç½®è¯ä¹¦ä»¥åŠç­¾å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># This file contains the fastlane.tools configuration
</span></span><span class="line"><span class="cl"># You can find the documentation at https://docs.fastlane.tools
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl"># For a list of all available actions, check out
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl">#     https://docs.fastlane.tools/actions
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl"># For a list of all available plugins, check out
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl">#     https://docs.fastlane.tools/plugins/available-plugins
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Uncomment the line if you want fastlane to automatically update itself
</span></span><span class="line"><span class="cl"># update_fastlane
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">default_platform(:ios)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">platform :ios do
</span></span><span class="line"><span class="cl">  desc &#34;build projcet&#34;
</span></span><span class="line"><span class="cl">  #é…ç½®Fastlaneä»»åŠ¡
</span></span><span class="line"><span class="cl">  lane :build do
</span></span><span class="line"><span class="cl">    #é…ç½®å·¥ç¨‹åŸºæœ¬ä¿¡æ¯
</span></span><span class="line"><span class="cl">    update_app_identifier(
</span></span><span class="line"><span class="cl">      xcodeproj: &#34;XYZ_iOS.xcodeproj&#34;, # Optional path to xcodeproj, will use the first .xcodeproj if not set
</span></span><span class="line"><span class="cl">      plist_path: &#34;XYZ_iOS/XYZ_iOS-Info.plist&#34;, # Path to info plist file, relative to xcodeproj
</span></span><span class="line"><span class="cl">      app_identifier: &#34;com.focuschina.xyz&#34; # The App Identifier
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">	#é…ç½®ç­¾åä»¥åŠè¯ä¹¦
</span></span><span class="line"><span class="cl">    automatic_code_signing(
</span></span><span class="line"><span class="cl">      path: &#34;XYZ_iOS.xcodeproj&#34;,
</span></span><span class="line"><span class="cl">	  #å¯ç”¨è‡ªåŠ¨ç­¾å
</span></span><span class="line"><span class="cl">      use_automatic_signing: true,
</span></span><span class="line"><span class="cl">      code_sign_identity: &#34;iPhone Developer&#34;,
</span></span><span class="line"><span class="cl">	  #æ ¹æ®è¯ä¹¦æ‹¿åˆ°å›¢é˜ŸIDæˆ–è€…ç›´æ¥å»è‹¹æœå¼€å‘è€…å®˜æ–¹æŸ¥é˜…
</span></span><span class="line"><span class="cl">      team_id:&#34;HB2YRTXXXXX&#34;,
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">	#é…ç½®ç”ŸæˆåŒ…çš„ç±»å‹ä»¥åŠå‘å¸ƒæ¸ é“
</span></span><span class="line"><span class="cl">    gym(scheme: &#34;XYZ_iOS&#34;,
</span></span><span class="line"><span class="cl">      workspace: &#34;XYZ_iOS.xcworkspace&#34;,
</span></span><span class="line"><span class="cl">      configuration: &#34;Debug&#34;,
</span></span><span class="line"><span class="cl">      clean: true,
</span></span><span class="line"><span class="cl">      output_name:&#34;XYZ_iOS.ipa&#34;,
</span></span><span class="line"><span class="cl">      export_xcargs:&#34;-allowProvisioningUpdates&#34;,
</span></span><span class="line"><span class="cl">      export_method: &#34;development&#34;           # app-store, ad-hoc, package, enterprise, development, developer-id
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">  end
</span></span><span class="line"><span class="cl">  lane :build_ts do
</span></span><span class="line"><span class="cl">    update_app_identifier(
</span></span><span class="line"><span class="cl">      xcodeproj: &#34;XYZ_iOS.xcodeproj&#34;, # Optional path to xcodeproj, will use the first .xcodeproj if not set
</span></span><span class="line"><span class="cl">      plist_path: &#34;XYZ_iOS/XYZ_iOS-Info.plist&#34;, # Path to info plist file, relative to xcodeproj
</span></span><span class="line"><span class="cl">      app_identifier: &#34;com.focuschina.xyz&#34; # The App Identifier
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">    automatic_code_signing(
</span></span><span class="line"><span class="cl">      path: &#34;XYZ_iOS.xcodeproj&#34;,
</span></span><span class="line"><span class="cl">      use_automatic_signing: true,
</span></span><span class="line"><span class="cl">      code_sign_identity: &#34;iPhone Developer&#34;,
</span></span><span class="line"><span class="cl">      team_id:&#34;HB2YRXXXXXX&#34;,
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">    gym(scheme: &#34;XYZ_iOS&#34;,
</span></span><span class="line"><span class="cl">      workspace: &#34;XYZ_iOS.xcworkspace&#34;,
</span></span><span class="line"><span class="cl">      configuration: &#34;Release&#34;,
</span></span><span class="line"><span class="cl">      clean: true,
</span></span><span class="line"><span class="cl">      output_name:&#34;XYZ_iOS.ipa&#34;,
</span></span><span class="line"><span class="cl">      export_xcargs:&#34;-allowProvisioningUpdates&#34;,
</span></span><span class="line"><span class="cl">      export_method: &#34;app-store&#34;           # app-store, ad-hoc, package, enterprise, development, developer-id
</span></span><span class="line"><span class="cl">    )
</span></span><span class="line"><span class="cl">  end
</span></span><span class="line"><span class="cl">  lane :build_number do
</span></span><span class="line"><span class="cl">    increment_build_number(build_number: ENV[&#34;BUILD_VERSION_CODE&#34;])
</span></span><span class="line"><span class="cl">  end
</span></span><span class="line"><span class="cl">  lane :build_version do
</span></span><span class="line"><span class="cl">    increment_version_number
</span></span><span class="line"><span class="cl">  end
</span></span><span class="line"><span class="cl">  lane :upload do
</span></span><span class="line"><span class="cl">    pgyer
</span></span><span class="line"><span class="cl">  end
</span></span><span class="line"><span class="cl">  lane :upload_ts do
</span></span><span class="line"><span class="cl">    upload_to_testflight
</span></span><span class="line"><span class="cl">  end
</span></span><span class="line"><span class="cl">end
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°å®šä¹‰äº†å¾ˆå¤š<strong>lane: XXX do</strong>,è¿™ä¸ªå°±æ˜¯å®šä¹‰Fastlaneçš„ä»»åŠ¡çš„åŸå­æ“ä½œï¼Œç¿»é˜…ä¸Šé¢Jenkinsè„šæœ¬ï¼Œæœ€åè°ƒç”¨çš„æ‰“åŒ…è„šæœ¬ä¹Ÿå°±æ˜¯è¿™é‡Œçš„ä»»åŠ¡ã€‚</p>
<h3 id="äº”jenkinsé‡Œçš„ä»»åŠ¡é…ç½®">äº”ã€Jenkinsé‡Œçš„ä»»åŠ¡é…ç½®</h3>
<p>å‰é¢å‡ ä¸ªç« èŠ‚å·²ç»è¯´äº†æ€ä¹ˆå»ä¹¦å†™Jenkinsfileè„šæœ¬ä»¥åŠAndroidã€IOSçš„æ‰“åŒ…è„šæœ¬è¯¥æ€ä¹ˆå»å†™ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è¯´è¯´ï¼Œæ€ä¹ˆæŠŠè¿™äº›éƒ¨ç½²åˆ°Jenkinsï¼Œå˜æˆå¯è§†åŒ–çš„é…å‚ä»»åŠ¡ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªItemä»»åŠ¡ï¼Œç„¶åé€‰æ‹©å¤šåˆ†æ”¯æµæ°´</p>
<p><img src="/images/ci_1.webp"
	
	
	
	loading="lazy"
	
	
></p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼Œé…ç½®ä»»åŠ¡çš„åˆ†æ”¯æºï¼Œä»¥åŠç¼–è¯‘é…ç½®</p>
<p><img src="/images/ci_2.webp"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/images/ci_3.webp"
	
	
	
	loading="lazy"
	
	
></p>
<p>å¯¹ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥å¡«å†™Jenkinsfileçš„åç§°å³å¯ï¼Œå› ä¸ºæˆ‘çš„Jenkinsè„šæœ¬æ˜¯ç›´æ¥æ”¾åœ¨å·¥ç¨‹æ ¹ç›®å½•ä¸‹çš„ï¼Œå¦‚æœä½ ä¸æ˜¯æ”¾åœ¨æ ¹ç›®å½•ï¼Œåˆ™éœ€è¦å¡«å†™æ­£ç¡®çš„å±‚çº§ã€‚</p>
<p><strong>ç¬¬ä¸‰æ­¥</strong> ç‚¹å‡»ä¿å­˜ï¼Œåˆ™å¯ä»¥åœ¨Jenkinsä¸»é¢æ¿çœ‹åˆ°æ–°å»ºçš„å¤šåˆ†æ”¯æµæ°´ä»»åŠ¡ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œå¯èƒ½çœ‹ä¸åˆ°å¯è§†åŒ–å‚æ•°é…ç½®ï¼Œéœ€è¦ç¬¬äºŒæ¬¡è¿è¡Œåˆ†æ”¯è„šæœ¬æ‰å¯ä»¥çœ‹åˆ°å¯è§†åŒ–å‚æ•°é…ç½®ã€‚</p>
<p><img src="/images/ci_4.webp"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/images/ci_5.webp"
	
	
	
	loading="lazy"
	
	
></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/devops/">Devops</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/posts/devops/gradle_pgyer/">
        
        

        <div class="article-details">
            <h2 class="article-title">Gradleç»“åˆè’²å…¬è‹±åšä¸€é”®ä¸Šä¼ æ‰“åŒ…è‡³è’²å…¬è‹±</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/posts/devops/ios_pgyer/">
        
        

        <div class="article-details">
            <h2 class="article-title">IOS ä¸€é”®æ‰“åŒ…ä¸Šä¼ è’²å…¬è‹±è„šæœ¬</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="RmondJone/RmondJone.github.io"
        issue-term="pathname"
        
        label="Comment"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 éƒ­ç¿°æ—çš„åšå®¢
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
